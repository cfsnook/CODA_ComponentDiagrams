<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="shortcut icon" href="icons/pyfav.png" type="image/png" />
<link href="index.html" title="CODA Component Diagrams User Manual" rel="start" />
<link href="index.html" title="CODA Component Diagrams User Manual" rel="first" />
<link href="index.html" rel="contents" title="Contents" />
<link rel="index" title="Index" />
<link href="sec-component_diagrams-tutorial_firstRefinement.html" rel="next" />
<link href="sec-component_diagrams-tutorial.html" rel="prev" />
<link href="sec-component_diagrams-tutorial.html" rel="parent" />
<meta name="aesop" content="information" />
<title>6.1 The Top-level Abstract Model</title>
</head>
<body>
<div class="navigation">
<div id="top-navigation-panel" xml:id="top-navigation-panel">
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class="online-navigation"><a title="6 Tutorial" href="sec-component_diagrams-tutorial.html" rel="prev"><img src="icons/previous.png" border="0" height="32" alt="Previous Page" width="32" /></a></td>
<td class="online-navigation"><a title="6 Tutorial" href="sec-component_diagrams-tutorial.html" rel="parent"><img src="icons/up.png" border="0" height="32" alt="Up One Level" width="32" /></a></td>
<td class="online-navigation"><a title="The First Refinement" href="sec-component_diagrams-tutorial_firstRefinement.html" rel="next"><img src="icons/next.png" border="0" height="32" alt="Next Page" width="32" /></a></td>
<td align="center" width="100%">CODA Component Diagrams User Manual</td>
<td class="online-navigation"><a href="index.html" rel="contents" title="Table of Contents"><img src="icons/contents.png" border="0" height="32" alt="Contents" width="32" /></a></td>
<td class="online-navigation"><img src="icons/blank.png" border="0" height="32" alt="" width="32" /></td>
<td class="online-navigation"><img src="icons/blank.png" border="0" height="32" width="32" /></td>
</tr></table>
<div class="online-navigation">
<span><b class="navlabel">Previous:</b>
<a href="sec-component_diagrams-tutorial.html" class="sectref" rel="prev">Tutorial</a></span>
<span><b class="navlabel">Up:</b>
<a href="sec-component_diagrams-tutorial.html" class="sectref" rel="parent">Tutorial</a></span>
<span><b class="navlabel">Next:</b>
<a href="sec-component_diagrams-tutorial_firstRefinement.html" class="sectref" rel="next">The First Refinement</a></span>
</div>
<hr /></div>
</div>



<div><h2 id="sec:component_diagrams-tutorial_topLevelAbstractModel">6.1 The Top-level Abstract Model</h2>
<p>The modelling process begins by describing a single, abstract state machine that represents the washing machine together with its environment. Four states represent the modes of the system: IDLE, WASHING, RINSING and SPINNING and seven transitions represent how the system modes evolve. A component WM is also introduced to represent the complete system. It contains the state-machine and owns operations that link to the transitions in the state-machine. The top-level component and state machine are shown in Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:AbstractModelOfAWashingMachine">13</a>. At this stage the transition operations in the component WM add little to the model but they are needed due to a limitation (explained below) of the representation of self-wake events. Since self-wake events are modelled in Event-B by a single generated variable per component, any operations of a component that, in future refinements, alter the state of self-wakes must be added when the component is first introduced. If they were added later the rules of refinement would prevent them from altering the self-wake variable. </p><div id="fig:AbstractModelOfAWashingMachine" class="figure"><center>
<img src="images/img-0013.png" alt="\includegraphics[width=1024]{figures/image13.png}" style="width:1024" /> <div class="caption"><b>Figure 13</b>: <span>Abstract Model of a Washing Machine</span></div>  </center></div><p>This system-level state machine is untimed and non-deterministic. For instance, when the system is in state RINSING, the system will immediately move to either state SPINNING or WASHING non-deterministically. The state machine represents all the possible mode traces of the system. Once the state machine has been constructed, the first step is to ensure that all the proof obligations that have been generated by the CODA tool are discharged successfully, as shown in Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:DischargedProofObligationsOfTheAbstractModel">14</a> below. Usually, if the user has added no extra invariants to the model, all the proof obligations should be discharged automatically. If any proof obligations have not been discharged (indicated by an orange question mark icon) they should be examined to determine whether there is a problem with the model. To examine a proof obligation, double click on its icon in the navigator. Switch to the proving perspective by clicking the green tick icon in the right hand corner of the menu bar. Examine the goal as well as the information tab to work out what the prover is attempting to prove. </p><div id="fig:DischargedProofObligationsOfTheAbstractModel" class="figure"><center>
<img src="images/img-0014.png" alt="\includegraphics[width=1024]{figures/image14.png}" style="width:1024" /> <div class="caption"><b>Figure 14</b>: <span>Discharged Proof Obligations of the Abstract Model</span></div>  </center></div><p>The next step in the process is to animate the system-level state machine to validate that states and transitions correctly represent the system-level view of the washing machine as shown in Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:AnimatingTheStatemachineOfTheAbstractModel">15</a>. This is a validation process requiring subjective evaluation of the model against system requirements. Does the state-machine behave as desired? </p><div id="fig:AnimatingTheStatemachineOfTheAbstractModel" class="figure"><center>
<img src="images/img-0015.png" alt="\includegraphics[width=1024]{figures/image15.png}" style="width:1024" /> <div class="caption"><b>Figure 15</b>: <span>Animating the State-machine of the Abstract Model</span></div>  </center></div><p>The current state of the system is WASHING, as indicated by the bold, black outline of the state. Three transitions, highlighted in green, are enabled from this state: abortWash, rinse and assumeLocked. Select one from this non-deterministic choice to proceed with the animation. Continue animating the state machine to validate this top-level specification against the system requirements. The specification may also be validated from the ProB view of Rodin as shown in Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:AnimatingTheAbstractModelWithProBEventAndHistoryViews">16</a> and Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:AnimatingTheAbstractModelWithProBStateView">17</a> below. The event view of Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:AnimatingTheAbstractModelWithProBEventAndHistoryViews">16</a> presents a list of enabled events from which one may be selected to advance the animation. The history view of Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:AnimatingTheAbstractModelWithProBEventAndHistoryViews">16</a> shows a record of previous selections. At any stage of the animation it is possible to go back to a selection in the history and perform a new animation from that point. </p><div id="fig:AnimatingTheAbstractModelWithProBEventAndHistoryViews" class="figure"><center>
<img src="images/img-0016.png" alt="\includegraphics[width=1024]{figures/image16.png}" style="width:1024" /> <div class="caption"><b>Figure 16</b>: <span>Animating the Abstract Model with ProB Event and History Views</span></div>  </center></div><p>The state view of Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:AnimatingTheAbstractModelWithProBStateView">17</a> shows the current and previous value for each variable. The invariants and guards may also be analysed in this view. The final verification step is to show absence of deadlock using the ProB model checker. </p><div id="fig:AnimatingTheAbstractModelWithProBStateView" class="figure"><center>
<img src="images/img-0017.png" alt="\includegraphics[width=1024]{figures/image17.png}" style="width:1024" /> <div class="caption"><b>Figure 17</b>: <span>Animating the Abstract Model with ProB State View</span></div>  </center></div><p>First the model checker is configured as shown in Figure <a href="sect0004.html#fig:ProBModelCheckerOptions">9</a> to find deadlocks and invariant violations. For this abstract model, the automatic provers have already proved all the proof obligations, but later in the refinement process it may be more difficult to prove some of the invariants. The model checker can then be used to look for counterexamples that are due to modelling errors. If the model checker reveals a counterexample it is more efficient than embarking on a complex proof that is eventually found to be false. If a counterexample is not revealed (and the complete state space has not been covered) the goal of the proof may still be false. Therefore the goals to be proven should be examined carefully as they often reveal a problem with the model. It is important not to leave unproven invariants in a model since if they are not true these could be used in later refinements by the automatic provers to make incorrect deductions. Selecting symmetry reduction option is not really necessary at this stage, but can help to reduce model checking time when the model is more complex. When the model checking completes, the results are presented by ProB in the window shown in Figure <a href="sec-component_diagrams-tutorial_topLevelAbstractModel.html#fig:ProBModelCheckingCoverageForTheAbstractModel">18</a> below. </p><div id="fig:ProBModelCheckingCoverageForTheAbstractModel" class="figure"><center>
<img src="images/img-0018.png" alt="\includegraphics[width=1024]{figures/image18.png}" style="width:1024" /> <div class="caption"><b>Figure 18</b>: <span>ProB Model Checking Coverage for the Abstract Model</span></div>  </center></div><p>The interesting coverage metric is shown at the bottom of the window: Uncovered Operations. In this case all operations have been covered which increases confidence in the absence of deadlock. </p></div>



<div class="navigation">
<div class="online-navigation">
<hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class="online-navigation"><a title="6 Tutorial" href="sec-component_diagrams-tutorial.html" rel="prev"><img src="icons/previous.png" border="0" height="32" alt="Previous Page" width="32" /></a></td>
<td class="online-navigation"><a title="6 Tutorial" href="sec-component_diagrams-tutorial.html" rel="parent"><img src="icons/up.png" border="0" height="32" alt="Up One Level" width="32" /></a></td>
<td class="online-navigation"><a title="The First Refinement" href="sec-component_diagrams-tutorial_firstRefinement.html" rel="next"><img src="icons/next.png" border="0" height="32" alt="Next Page" width="32" /></a></td>
<td align="center" width="100%">CODA Component Diagrams User Manual</td>
<td class="online-navigation"><a href="index.html" rel="contents" title="Table of Contents"><img src="icons/contents.png" border="0" height="32" alt="Contents" width="32" /></a></td>
<td class="online-navigation"><img src="icons/blank.png" border="0" height="32" alt="" width="32" /></td>
<td class="online-navigation"><img src="icons/blank.png" border="0" height="32" width="32" /></td>
</tr></table>
<div class="online-navigation">
<span><b class="navlabel">Previous:</b>
<a href="sec-component_diagrams-tutorial.html" class="sectref" rel="prev">Tutorial</a></span>
<span><b class="navlabel">Up:</b>
<a href="sec-component_diagrams-tutorial.html" class="sectref" rel="parent">Tutorial</a></span>
<span><b class="navlabel">Next:</b>
<a href="sec-component_diagrams-tutorial_firstRefinement.html" class="sectref" rel="next">The First Refinement</a></span>
</div>
</div>
<hr />
<!--
<span class="release-info">Release 2.4.3, documentation updated on 29 March 2006.</span>
-->
</div>
<!--End of Navigation Panel-->
<!--
<address>
See <i><a href="about.html">About this document...</a></i> for information on suggesting changes.
</address>
-->
</body>
</html>