<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="shortcut icon" href="icons/pyfav.png" type="image/png" />
<link href="index.html" title="CODA Component Diagrams User Manual" rel="start" />
<link href="index.html" title="CODA Component Diagrams User Manual" rel="first" />
<link href="index.html" rel="contents" title="Contents" />
<link rel="index" title="Index" />
<link href="sec-component_diagrams-tutorial_fourthRefinement.html" rel="next" />
<link href="sec-component_diagrams-tutorial_secondRefinement.html" rel="prev" />
<link href="sec-component_diagrams-tutorial.html" rel="parent" />
<meta name="aesop" content="information" />
<title>6.4 The Third Refinement</title>
</head>
<body>
<div class="navigation">
<div id="top-navigation-panel" xml:id="top-navigation-panel">
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class="online-navigation"><a title="6.3 The Second Refinement" href="sec-component_diagrams-tutorial_secondRefinement.html" rel="prev"><img src="icons/previous.png" border="0" height="32" alt="Previous Page" width="32" /></a></td>
<td class="online-navigation"><a title="6 Tutorial" href="sec-component_diagrams-tutorial.html" rel="parent"><img src="icons/up.png" border="0" height="32" alt="Up One Level" width="32" /></a></td>
<td class="online-navigation"><a title="The Fourth Refinement" href="sec-component_diagrams-tutorial_fourthRefinement.html" rel="next"><img src="icons/next.png" border="0" height="32" alt="Next Page" width="32" /></a></td>
<td align="center" width="100%">CODA Component Diagrams User Manual</td>
<td class="online-navigation"><a href="index.html" rel="contents" title="Table of Contents"><img src="icons/contents.png" border="0" height="32" alt="Contents" width="32" /></a></td>
<td class="online-navigation"><img src="icons/blank.png" border="0" height="32" alt="" width="32" /></td>
<td class="online-navigation"><img src="icons/blank.png" border="0" height="32" width="32" /></td>
</tr></table>
<div class="online-navigation">
<span><b class="navlabel">Previous:</b>
<a href="sec-component_diagrams-tutorial_secondRefinement.html" class="sectref" rel="prev">The Second Refinement</a></span>
<span><b class="navlabel">Up:</b>
<a href="sec-component_diagrams-tutorial.html" class="sectref" rel="parent">Tutorial</a></span>
<span><b class="navlabel">Next:</b>
<a href="sec-component_diagrams-tutorial_fourthRefinement.html" class="sectref" rel="next">The Fourth Refinement</a></span>
</div>
<hr /></div>
</div>



<div><h2 id="sec:component_diagrams-tutorial_thirdRefinement">6.4 The Third Refinement</h2>
<p>Now we refine the notion of the Program. We associate with each PID a washTime, rinseTime and spinTime and also introduce a WashCount and SpinCount as shown in Figure <a href="sec-component_diagrams-tutorial_thirdRefinement.html#fig:AddingWashProgramDetailsToTheModel">34</a>. These properties constrain and make deterministic the operation of the washing machine sub-system for a given PID. </p><div id="fig:AddingWashProgramDetailsToTheModel" class="figure"><center>
<img src="images/img-0036.png" alt="\includegraphics[width=1024]{figures/image36.png}" style="width:1024" /> <div class="caption"><b>Figure 34</b>: <span>Adding Wash Program Details to the Model</span></div>  </center></div><p>The delay introduced for each wash mode is modelled using a SelfWake as shown for the rinse mode in Figure <a href="sec-component_diagrams-tutorial_thirdRefinement.html#fig:IntroducingWashProgramDelaysUsingSelfWakes">35</a>. </p><div id="fig:IntroducingWashProgramDelaysUsingSelfWakes" class="figure"><center>
<img src="images/img-0037.png" alt="\includegraphics[width=1024]{figures/image37.png}" style="width:1024" /> <div class="caption"><b>Figure 35</b>: <span>Introducing Wash Program Delays using Self Wakes</span></div>  </center></div><p>The number of washes or rinses associated with a program is modelled using a counter which is decremented and hence completes at rinseCounter = 0, as shown in Figure <a href="sec-component_diagrams-tutorial_thirdRefinement.html#fig:IntroducingWashProgramCyclesUsingGuards">36</a>. </p><div id="fig:IntroducingWashProgramCyclesUsingGuards" class="figure"><center>
<img src="images/img-0038.png" alt="\includegraphics[width=1024]{figures/image38.png}" style="width:1024" /> <div class="caption"><b>Figure 36</b>: <span>Introducing Wash Program Cycles using Guards</span></div>  </center></div><p>Again, the model checker is run to verify that no deadlocks have been introduced into the system. Since this refinement is only to strengthen the guards, invariant preservation is not an issue in this refinement. Note that as shown in Figure <a href="sec-component_diagrams-tutorial_thirdRefinement.html#fig:ProBModelCheckingCoverageForTheThirdRefinement">37</a>, full operation coverage is achieved. The program constraints introduced in this refinement have reduced the model state space. </p><div id="fig:ProBModelCheckingCoverageForTheThirdRefinement" class="figure"><center>
<img src="images/img-0039.png" alt="\includegraphics[width=1024]{figures/image39.png}" style="width:1024" /> <div class="caption"><b>Figure 37</b>: <span>ProB Model Checking Coverage for the Third Refinement</span></div>  </center></div><p>The state machine is shown in Figure <a href="sec-component_diagrams-tutorial_thirdRefinement.html#fig:StatemachineForTheThirdRefinement">38</a> below. Invariants concerning the counters have been added to the INPROGRESS and RINSING states. These invariants help ensure that no mistakes have been made in constructing the counters. </p><div id="fig:StatemachineForTheThirdRefinement" class="figure"><center>
<img src="images/img-0040.png" alt="\includegraphics[width=1024]{figures/image40.png}" style="width:1024" /> <div class="caption"><b>Figure 38</b>: <span>State-machine for the Third Refinement </span></div>  </center></div></div>



<div class="navigation">
<div class="online-navigation">
<hr />
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td class="online-navigation"><a title="6.3 The Second Refinement" href="sec-component_diagrams-tutorial_secondRefinement.html" rel="prev"><img src="icons/previous.png" border="0" height="32" alt="Previous Page" width="32" /></a></td>
<td class="online-navigation"><a title="6 Tutorial" href="sec-component_diagrams-tutorial.html" rel="parent"><img src="icons/up.png" border="0" height="32" alt="Up One Level" width="32" /></a></td>
<td class="online-navigation"><a title="The Fourth Refinement" href="sec-component_diagrams-tutorial_fourthRefinement.html" rel="next"><img src="icons/next.png" border="0" height="32" alt="Next Page" width="32" /></a></td>
<td align="center" width="100%">CODA Component Diagrams User Manual</td>
<td class="online-navigation"><a href="index.html" rel="contents" title="Table of Contents"><img src="icons/contents.png" border="0" height="32" alt="Contents" width="32" /></a></td>
<td class="online-navigation"><img src="icons/blank.png" border="0" height="32" alt="" width="32" /></td>
<td class="online-navigation"><img src="icons/blank.png" border="0" height="32" width="32" /></td>
</tr></table>
<div class="online-navigation">
<span><b class="navlabel">Previous:</b>
<a href="sec-component_diagrams-tutorial_secondRefinement.html" class="sectref" rel="prev">The Second Refinement</a></span>
<span><b class="navlabel">Up:</b>
<a href="sec-component_diagrams-tutorial.html" class="sectref" rel="parent">Tutorial</a></span>
<span><b class="navlabel">Next:</b>
<a href="sec-component_diagrams-tutorial_fourthRefinement.html" class="sectref" rel="next">The Fourth Refinement</a></span>
</div>
</div>
<hr />
<!--
<span class="release-info">Release 2.4.3, documentation updated on 29 March 2006.</span>
-->
</div>
<!--End of Navigation Panel-->
<!--
<address>
See <i><a href="about.html">About this document...</a></i> for information on suggesting changes.
</address>
-->
</body>
</html>